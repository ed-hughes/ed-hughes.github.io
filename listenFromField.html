<!doctype html>
<html>
  <head>
    <script src="//js.jotform.com/JotFormCustomWidget.min.js"></script>
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="pragma" content="no-cache" />
  </head>
  <style></style>
  <body>
    <div id="reviewArea">
    </div>
    <script type="text/javascript">
      function tableExampleForCleaningDepot() {
        // get widget parameters if any using getWidgetSettings for all, or getWidgetSetting('name') for a specific one.
        const params = JFCustomWidget.getWidgetSettings();
        const parent = params.ref
        const thisQid = params.qid

        // exposed functions
        this.init = init;
        this.getData = getData;
        const qid = "input_3"
        
          JFCustomWidget.listenFromField(qid, 'change', function(value) {
              console.log(`CHANGE EVENT: ${value}`)
          })
          JFCustomWidget.listenFromField(qid, 'keyup', function(value) {
              console.log(`KEYUP EVENT: ${value}`)
          })


        function getAllFormFields(){
          console.log("JFCustomWidget.", JFCustomWidget.formID)
          console.log("Settings", JFCustomWidget.getWidgetSettings())
          console.log("getParentOrigin", JFCustomWidget.getParentOrigin())
          console.log("getFrameData", JFCustomWidget.getFrameData())
          console.log("getFormTrackerID", JFCustomWidget.getFormTrackerID())
          console.log("getAllQueryString", JFCustomWidget.getAllQueryString())
          console.log("getQueryString", JFCustomWidget.getQueryString())
          const parentUrl = (window.location != window.parent.location) ? document.referrer : document.location.href;
          console.log("ref", document.referrer)
          console.log("href", document.location.href)
          console.log("aO", window.location.ancestorOrigin)
          console.log("ao2", document.location.ancestorOrigins[document.location.ancestorOrigins.length - 1])
        }

        async function getFormHtml(formID){
          // const response = await fetch(
        }

        function parseOutQids(html){
          const parser = new DOMParser();
          const doc = parser.parseFromString(html, "text/html")
        }

        // initialization of the widget
        function init(formData) {
          console.log("Hello world!");
          console.log(formData)
        }
        
        // get widget data
        function getData() {
          return {
            valid: true,
            value: "TEST"
          };
        }
      }

      // always subscribe to ready event and implement widget related code
      // inside callback function , it is the best practice while developing widgets
      JFCustomWidget.subscribe("ready", function (data) {
        console.log(data)
        var widget = new tableExampleForCleaningDepot();
        widget.init(data);

        JFCustomWidget.subscribe("submit", function () {
          JFCustomWidget.sendSubmit(widget.getData());
        });
      });
    </script>
  </body>
</html>
