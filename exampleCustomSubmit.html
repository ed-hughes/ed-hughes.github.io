<!doctype html>
<html>
  <head>
    <script src="https://cdn.jotfor.ms/s/umd/latest/for-custom-widgets.js"></script>
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="pragma" content="no-cache" />
  </head>
  <style></style>
  <body>
    <button type="button" id="saveButton" onClick>Custom Save</button>
    <script type="text/javascript">
      function AllMethods() {

        document.getElementById('saveButton').addEventListener('click', function() {
          console.log("saveButtonClicked");
          submitHandler()
          
      });

        
        this.init = init;
        this.submitHandler = submitHandler;
        
        function init(formData) {
          console.log("init", JSON.stringify({formData}, null, 2));
        }

        function submitHandler(){
                  const otherFields = [
          {label: "completed", value: "no"},
        ]
        
          console.log({otherFields})
          JFCustomWidget.setFieldsValueByLabel(otherFields)
          JFCustomWidget.sendSubmit({
              valid: true,
              value: ""
          });
        }
      }
      JFCustomWidget.subscribe("ready", function (data) {
        var widget = new AllMethods();
        widget.init(data);

        JFCustomWidget.subscribe("submit", function () {
          JFCustomWidget.sendSubmit({
              valid: true,
              value: ""
          });
        });
      });
    </script>
  </body>
</html>
