<html>

  <script>
    window.addEventListener(
      "message",
      (event) => {
        if(event.data.type === "prism_message"){
          const iframeElement = document.querySelectorAll('iframe[id^="JotFormIFrame"]')[0];
          const customEvent = new MessageEvent("prism_message", { data: { source: iframeElement, data: { ...event.data.data } }});
          console.log({customEvent});
          window.dispatchEvent(customEvent);
        }
      },
      false,
    );
  </script>
    <h1>Parent embed page</h1>
    <iframe
      id="JotFormIFrame-242877028197064"
      title="Demo"
      onload="window.parent.scrollTo(0,0)"
      allowtransparency="true"
      allow="geolocation; microphone; camera; fullscreen"
      src="https://demo.jotform.com/242877028197064"
      frameborder="0"
      style="min-width:100%;max-width:100%;height:539px;border:none;"
      scrolling="no"
    >
    </iframe>
    <script src='https://demo.jotform.com/s/umd/latest/for-form-embed-handler.js'></script>
    <script>window.jotformEmbedHandler("iframe[id='JotFormIFrame-242877028197064']", "https://demo.jotform.com/")</script>
    <pre>
      <h2>What was emitted back</h2>
      <code id="output">
      </code>
    </pre>
    
  </html>
